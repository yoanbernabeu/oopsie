---
const sections = [
  {
    title: 'Getting Started',
    icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2" /></svg>`,
    links: [
      { href: '/oopsie/docs/getting-started', label: 'Quick Start' },
    ],
  },
  {
    title: 'SDK',
    icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" /></svg>`,
    links: [
      { href: '/oopsie/docs/sdk/installation', label: 'Installation' },
      { href: '/oopsie/docs/sdk/configuration', label: 'Configuration' },
      { href: '/oopsie/docs/sdk/widget', label: 'Widget Customization' },
      { href: '/oopsie/docs/sdk/headless', label: 'Headless Mode' },
    ],
  },
  {
    title: 'Server',
    icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="2" width="20" height="8" rx="2" ry="2" /><rect x="2" y="14" width="20" height="8" rx="2" ry="2" /><line x1="6" y1="6" x2="6.01" y2="6" /><line x1="6" y1="18" x2="6.01" y2="18" /></svg>`,
    links: [
      { href: '/oopsie/docs/server/configuration', label: 'Configuration' },
      { href: '/oopsie/docs/server/webhooks', label: 'Webhooks' },
      { href: '/oopsie/docs/server/storage', label: 'Storage' },
    ],
  },
  {
    title: 'Community',
    icon: `<svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2" /><circle cx="9" cy="7" r="4" /><path d="M23 21v-2a4 4 0 0 0-3-3.87" /><path d="M16 3.13a4 4 0 0 1 0 7.75" /></svg>`,
    links: [
      { href: '/oopsie/docs/contributing', label: 'Contributing' },
    ],
  },
];

const currentPath = Astro.url.pathname.replace(/\/$/, '');
---

<nav class="space-y-5">
  {sections.map((section) => (
    <div>
      <h3 class="flex items-center gap-2 text-[11px] font-semibold text-zinc-500 uppercase tracking-widest mb-2 px-3">
        <span class="text-zinc-600" set:html={section.icon} />
        {section.title}
      </h3>
      <ul class="space-y-0.5">
        {section.links.map((link) => {
          const isActive = currentPath === link.href;
          return (
            <li>
              <a
                href={link.href}
                class:list={[
                  'block pl-4 pr-3 py-2 rounded-lg text-[13px] transition-all duration-200 relative',
                  isActive
                    ? 'sidebar-link-active text-coral font-medium bg-coral-100'
                    : 'text-zinc-500 hover:text-zinc-300 hover:bg-surface-3/30',
                ]}
              >
                {link.label}
              </a>
            </li>
          );
        })}
      </ul>
    </div>
  ))}

  <!-- GitHub link -->
  <div class="pt-4 border-t border-surface-3/30 px-3">
    <a
      href="https://github.com/yoanbernabeu/oopsie"
      target="_blank"
      rel="noopener"
      class="flex items-center gap-2 text-xs text-zinc-600 hover:text-zinc-400 transition-colors"
    >
      <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
      </svg>
      View on GitHub
    </a>
  </div>
</nav>
